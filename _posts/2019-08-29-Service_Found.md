---
layout: post
title: 服务发现
date: 2019-08-29 
tag: 研发
---

# 服务发现

## 1、服务发现是什么
随着服务规模的不断扩大，用户不断增加，当前服务通常部署在一个集群甚至多个集群上，而且服务的上线会导致消费方的修改。因此服务发现出现了。

服务发现有三个角色，服务提供者、服务消费者和服务中介。服务中介是联系服务提供者和服务消费者的桥梁。服务提供者将自己提供的服务地址注册到服务中介，服务消费者从服务中介那里查找自己想要的服务的地址，然后享受这个服务。服务中介提供多个服务，每个服务对应多个服务提供者。

![image](https://upload-images.jianshu.io/upload_images/1500770-41e2975153c8918a..jpg?imageMogr2/auto-orient/strip|imageView2/2/w/694/format/webp)

服务中介就是一个字典，字典里有很多key/value键值对，key是服务名称，value是服务提供者的地址列表。服务注册就是调用字典的Put方法塞东西，服务查找就是调用字典的Get方法拿东西。

当服务提供者节点挂掉时，要求服务能够及时取消注册，比便及时通知消费者重新获取服务地址。

当服务提供者新加入时，要求服务中介能及时告知服务消费者，你要不要尝试一下新的服务。

